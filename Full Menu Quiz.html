<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Updated Menu Quiz</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f2f2f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
      max-width: 600px;
      width: 100%;
    }
    button {
      margin: 8px;
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    .correct-btn { background-color: #28a745; }
    .incorrect-btn { background-color: #007bff; }
    .neutral-btn { background-color: #6c757d; }
    #question { font-size: 20px; font-weight: bold; margin-bottom: 10px; }
    #answer { font-size: 18px; display: none; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="card">
    <div id="question">Loading...</div>
    <div id="answer"></div>
    <button class="neutral-btn" onclick="showAnswer()">Show Answer</button>
    <button class="correct-btn" onclick="correct()">Correct</button>
    <button class="incorrect-btn" onclick="incorrect()">Incorrect</button>
    <button class="neutral-btn" onclick="nextCard()">Next</button>
    <button class="neutral-btn" onclick="reviewMode()">Review Mode</button>
    <br>
    <label><input type="checkbox" id="trackScoreToggle" onchange="toggleScore()"> Track Score</label>
    <br>
    <label>Question Limit: <input id="questionLimit" type="number" min="1" max="100" value="10"></label>
    <div id="scoreDisplay"></div>
    <canvas id="scoreChart" width="400" height="200" style="margin-top: 20px;"></canvas>
  </div>
<script>
const fullSet = [["What is in the Ahi Tuna Tacushi?", "Cilantro, Spicy Mayo, Crispy Wonton, Tobiko"], ["What is in the Crab Cakes?", "Jumbo Lump Crab, Arugula, Garlic Aioli"], ["What is in the Calamari?", "Flash Fried Calamari Steaks, Lemon Beurre Blanc, Capers, Cherry Tomatoes, Lemon"], ["What is in the Grilled Octopus?", "Spinach, Arugula, Cherry Tomato, Feta Cream, Lemon Sumac"], ["What is in the Mussels Diablo?", "Garlic Butter, White Wine, Cherry Tomatoes, Peppers, Crostini"], ["What is in the Woodward Steak Tips?", "Filet, Caramelized Onion, Mushroom, Blue Cheese, Zip Sauce"], ["What is in the Truffle Burrata & Heirloom Tomato?", "Burrata, Heirloom Tomato, Balsamic Glaze, Grilled Crostini, Prosciutto"], ["What is in the Brussels Sprouts?", "White Balsamic, Red Onion, Truffle Vinaigrette, Parmesan"], ["What types of sliders are on the menu?", "Wagyu Beef, Crab Cake, Short Rib"], ["What is in the Shrimp & Grits?", "Hominy Grits, Jumbo Shrimp, Garlic White Wine Butter"]];
let shuffled = [], current = 0;
let score = parseInt(localStorage.getItem("menu_quiz_score") || "0");
let total = parseInt(localStorage.getItem("menu_quiz_total") || "0");
let trackScore = false;
let history = JSON.parse(localStorage.getItem("menu_quiz_history") || "[]");

function shuffle() {
  const limit = parseInt(document.getElementById("questionLimit").value) || 10;
  shuffled = fullSet.sort(() => 0.5 - Math.random()).slice(0, limit);
  current = 0;
  updateCard();
}

function updateCard() {
  document.getElementById("question").innerText = shuffled[current][0];
  document.getElementById("answer").innerText = shuffled[current][1];
  document.getElementById("answer").style.display = "none";
}

function showAnswer() {
  document.getElementById("answer").style.display = "block";
}

function correct() {
  if (trackScore) {
    score++; total++;
    localStorage.setItem("menu_quiz_score", score);
    localStorage.setItem("menu_quiz_total", total);
  }
  nextCard();
}

function incorrect() {
  if (trackScore) {
    total++;
    localStorage.setItem("menu_quiz_total", total);
  }
  nextCard();
}

function nextCard() {
  current++;
  if (current >= shuffled.length) {
    alert("End of quiz.");
    return;
  }
  updateCard();
}

function toggleScore() {
  trackScore = document.getElementById("trackScoreToggle").checked;
  document.getElementById("scoreDisplay").innerText = trackScore ? `Score: ${score} / ${total}` : "";
}

function reviewMode() {
  shuffled = [...fullSet];
  current = 0;
  updateCard();
}

window.onload = function() {
  shuffle();
  toggleScore();
};
</script>
</body>
</html>
